---

# âš¡ STEP 1: Prepare the Raw Datasets

---

âœ… **1.1 Power Outage Data**

- Use the dataset you showed me (Start Time, County, Cause, etc.)
- Clean the data:
    - Drop fields you don't need (`GlobalID`, `OutageTypeColor`).
    - Keep only these fields:
        - Start Date/Time
        - County
        - Outage Type
        - Outage Status
        - Cause
        - Impacted Customers

âœ… **1.2 Filter Data**

- **Remove Planned Outages**:
    
    ```sql
    WHERE "Outage Type" = 'Not Planned'
    
    ```
    
- **Reason**: We only want to predict outages caused by **weather**, not human-scheduled shutdowns.

âœ… **1.3 Real-Time and Historical Weather Data**

- Pull historical weather data from Open-Meteo or other APIs.
- You need for each **county**:
    - Time
    - Temperature
    - Wind Speed
    - Precipitation

âœ… **1.4 Load into Snowflake**

- Upload both datasets into `RAW` schema:
    - `RAW.POWER_OUTAGES`
    - `RAW.WEATHER_FORECASTS`

âœ… **âœ… Milestone 1**: Clean and store your raw data in Snowflake!

---

# âš¡ STEP 2: Build a Training Dataset (Label Outages)

---

âœ… **2.1 Align Outages with Weather**

- Match each outage with **weather conditions** from **same time** and **county**.
- For each outage record:
    - Find weather 1 hour before outage start.
    - Attach `wind_speed`, `temperature`, `precipitation` fields.

âœ… **2.2 Create Labels**

- **If Outage Exists**: Set `outage_label = 1`.
- **If No Outage Exists**: Generate "normal" time points where no outage was reported.
    - Set `outage_label = 0`.

âœ… **2.3 Final Training Data Example**

| County | Timestamp | Temperature | Wind Speed | Precipitation | Outage_Label |
| --- | --- | --- | --- | --- | --- |
| Santa Clara | 2025-04-21 03:00 | 12Â°C | 32 mph | 5mm | 1 |
| Alameda | 2025-04-21 05:00 | 15Â°C | 10 mph | 0mm | 0 |

âœ… **âœ… Milestone 2**: Have a fully labeled dataset ready for training!

---

# âš¡ STEP 3: Predict Outages (Two Options)

---

âœ… **Option 1: Simple Rule-Based Risk Score**

- If Wind Speed > 30 mph â†’ +1 risk
- If Precipitation > 10 mm â†’ +1 risk
- Sum the risks:
    - Risk = High if sum â‰¥ 2
    - Risk = Medium if sum = 1
    - Risk = Low if sum = 0

âœ… **Option 2: Machine Learning (Optional Advanced)**

- Use `RandomForestClassifier` to train a model:
    - Inputs (X): wind speed, precipitation, temperature
    - Output (y): outage_label
- Train/test split your dataset (80%/20%).

âœ… **Python Example**

```python
from sklearn.ensemble import RandomForestClassifier
from sklearn.model_selection import train_test_split

X = dataset[['wind_speed', 'precipitation', 'temperature']]
y = dataset['outage_label']

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)

model = RandomForestClassifier()
model.fit(X_train, y_train)

predictions = model.predict(X_test)

```

âœ… **âœ… Milestone 3**: Have a working prediction model or rules!

---

# âš¡ STEP 4: Predict Future Outages Based on Forecasted Weather

---

âœ… **4.1 Fetch Forecasted Weather**

- Use **Open-Meteo** API.
- Fetch hourly weather for next 7 days.

âœ… **4.2 Apply Risk Rules or ML Model**

- For each forecasted point:
    - Apply rule: check if risk conditions are satisfied.
    - OR predict using ML model.

âœ… **4.3 Store Predictions**

- Create a `PREDICTIONS.OUTAGE_FORECAST` table:
    
    ```sql
    CREATE TABLE PREDICTIONS.OUTAGE_FORECAST (
      timestamp TIMESTAMP,
      county STRING,
      predicted_risk STRING,
      risk_score INT
    );
    
    ```
    

âœ… **âœ… Milestone 4**: Have a table with future risk predictions!

---

# âš¡ STEP 5: Visualization (Dashboards)

---

âœ… **Tableau Dashboard Ideas**

- Heatmap of California counties colored by **risk level**.
- Time series of **Risk Score vs Time**.
- Filters: county, date, risk severity (low/medium/high).

âœ… **Connect Tableau to Snowflake**

- Live connection to prediction tables.

âœ… **âœ… Milestone 5**: Live dashboard showing upcoming outage risks!

---

# âš¡ STEP 6: Real-Time Alerts (Bonus Feature)

---

âœ… Inside Airflow:

- After each weather fetch + prediction step,
- If any county predicted risk is HIGH â†’ trigger **Email alert**.

âœ… Example Airflow Email:

```python
send_email_task = EmailOperator(
    task_id='send_alert_email',
    to='your_email@example.com',
    subject='[ForecastBlackout] High Outage Risk Detected',
    html_content='High Risk in Santa Clara at 2025-04-22 04:00 AM!',
    dag=dag
)

```

âœ… **âœ… Milestone 6**: Real-time outage risk alerts!

---

# ðŸ“… Timeline if You Follow This

| Day | Task |
| --- | --- |
| Day 1-2 | Clean outage & weather data. |
| Day 3-4 | Merge and label training dataset. |
| Day 5-6 | Build risk rules and/or train ML model. |
| Day 7 | Forecast future risks with weather predictions. |
| Day 8-9 | Build Tableau dashboards. |
| Day 10 | Add alert emails + Final testing. |

---

# ðŸ“‹ Checklist Summary

| Step | Status |
| --- | --- |
| Prepare raw data | ðŸ”² |
| Label training dataset | ðŸ”² |
| Build prediction logic | ðŸ”² |
| Predict future risks | ðŸ”² |
| Store in Snowflake | ðŸ”² |
| Create dashboards | ðŸ”² |
| Set up alerting | ðŸ”² |
| Final polish | ðŸ”² |

---
